<div class="center-wrapper">
  <div class="center">
    <h1 class="text-center">注册</h1>
    <nz-alert [nzType]="'error'" [hidden] = "errorMessage == ''">
      <span alert-body class="text-warning">
        {{errorMessage}}
      </span>
    </nz-alert>
    <form nz-form [formGroup]="register" (ngSubmit)="submitForm($event, register.value)" [nzLayout]="'horizontal'">
        <div nz-form-item>
          <div nz-form-control>
            <nz-input formControlName='username' [nzPlaceHolder]="'Username'" [nzSize]="'large'">
              <ng-template #prefix>
                <i class="anticon anticon-user"></i>
              </ng-template>
            </nz-input>
            <div nz-form-explain *ngIf="register.controls.username.dirty && register.controls.username.hasError('required')">Please input your username!</div>
            <div nz-form-explain *ngIf="register.controls.username.dirty && register.controls.username.hasError('repeat')">username is repeat!</div>
          </div>
        </div>
        <div nz-form-item>
          <div nz-form-control>
              <nz-input formControlName='password' [nzType]="'password'" [nzPlaceHolder]="'Password'" [nzSize]="'large'">
                <ng-template #prefix>
                  <i class="anticon anticon-lock"></i>
                </ng-template>
              </nz-input>
              <div nz-form-explain *ngIf="register.controls.password.dirty && register.controls.password.hasError('required')">Please input your password!</div>
          </div>
        </div>
        <div nz-form-item>
          <div nz-form-control>
              <nz-input formControlName='passwordConfirm' [nzType]="'password'" [nzPlaceHolder]="'Password'" [nzSize]="'large'">
                <ng-template #prefix>
                  <i class="anticon anticon-lock"></i>
                </ng-template>
              </nz-input>
              <div nz-form-explain *ngIf="register.controls.passwordConfirm.dirty && register.controls.passwordConfirm.hasError('required')">Please input your password!</div>
              <div nz-form-explain *ngIf="register.controls.passwordConfirm.dirty && register.controls.passwordConfirm.hasError('accordance')">The passwords entered twice are not the same!</div>
          </div>
        </div>
        <div nz-form-item>
          <div nz-form-control>
            <div nz-row [nzGutter]='10'>
              <div nz-col [nzSpan]='16'>
                <nz-input formControlName='email' [nzPlaceHolder]="'Eamil'" [nzSize]="'large'">
                  <ng-template #prefix>
                    <i class="anticon anticon-inbox"></i>
                  </ng-template>
                </nz-input>
              </div>
              <div class="button-block" nz-col [nzSpan]='8'>
                <button nz-button type="button" (click)='getCode()' [disabled]='!getCodeFlag' [nzLoading]='getCodeState' [nzType]="'primary'" [nzSize]="'large'">{{getCodeText}}</button>
              </div>
              <div nz-col [nzSpan]='24'>
                <div nz-form-explain *ngIf="register.controls.email.dirty && register.controls.email.hasError('required')">Please input your email!</div>
                <div nz-form-explain *ngIf="register.controls.email.dirty && register.controls.email.hasError('emailTest')">E-mail address is illegal</div>
              </div>
            </div>
          </div>
        </div>
        <div nz-form-item>
          <div nz-form-control>
              <nz-input formControlName='code' [nzPlaceHolder]="'Code'" [nzSize]="'large'">
                <ng-template #prefix>
                  <i class="anticon anticon-lock"></i>
                </ng-template>
              </nz-input>
              <div nz-form-explain *ngIf="register.controls.code.dirty && register.controls.code.hasError('required')">Please input your code!</div>
          </div>
        </div>
        <div nz-form-item>
          <div nz-form-control>
            <button nz-button [nzLoading]='submitFlag' [nzType]="'primary'" [nzSize]="'large'">注册</button>
            <button nz-button [nzType]="'default'" [nzSize]="'large'">重置</button>
          </div>
        </div>
    </form>
  </div>
</div>