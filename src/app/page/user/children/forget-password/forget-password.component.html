<div class="center-wrapper">
  <div class="center">
    <a routerLink='/user/login'><i class="anticon anticon-left"></i>返回</a>
    <h1 class="text-center">忘记密码</h1>
    <form nz-form [formGroup]="forgetPassword" [nzLayout]="'horizontal'">
      <div nz-form-item *ngIf="stepFlag === 1">
        <p class="set-distance">
          请填写您的用户名
        </p>
        <div class="set-distance" nz-form-control nzHasFeedback>
          <nz-input formControlName='username' [nzPlaceHolder]="'UserName'" [nzSize]="'large'">
            <ng-template #prefix>
              <i class="anticon anticon-user"></i>
            </ng-template>
          </nz-input>
          <div nz-form-explain *ngIf="forgetPassword.controls.username.dirty&&forgetPassword.controls.username.hasError('required')">Please input your username!</div>
        </div>
        <button nz-button type='button' (click)="submitUsername()" [nzType]="'primary'" [nzSize]="'large'" [nzLoading]="buttonLoad">提交</button>
      </div>
      <div nz-form-item nz-row *ngIf="stepFlag === 2">
        <div class="set-distance" nz-col [nzSpan]="24">
          已经向您的邮箱{{email}}发送了验证码邮件，请您前往邮箱查看
        </div>
        <div class="set-distance" nz-form-control nz-col [nzSpan]="24" [nzHasFeedback]="'true'">
          <nz-input formControlName='code' [nzPlaceHolder]="'Code'" [nzSize]="'large'">
            <ng-template #prefix>
              <i class="anticon anticon-safety"></i>
            </ng-template>
          </nz-input>
          <div nz-form-explain *ngIf="forgetPassword.controls.code.dirty&&forgetPassword.controls.code.hasError('required')">Please input your code!</div>
        </div>
        <button nz-button type='button' (click)="checkCode()" [nzType]="'primary'" [nzSize]="'large'">提交</button>
      </div>
      <div nz-form-item nz-row *ngIf="stepFlag === 3">
        <div class="set-distance" nz-col [nzSpan]="24">
          设置新的密码
        </div>
        <div class="set-distance" nz-form-control nz-col [nzSpan]="24" [nzHasFeedback]="'true'">
          <nz-input formControlName='password' [nzPlaceHolder]="'Password'" [nzSize]="'large'">
            <ng-template #prefix>
              <i class="anticon anticon-lock"></i>
            </ng-template>
          </nz-input>
          <div nz-form-explain *ngIf="forgetPassword.controls.password.dirty&&forgetPassword.controls.password.hasError('required')">Please input your password!</div>
        </div>
        <div class="set-distance" nz-form-control nz-col [nzSpan]="24" [nzHasFeedback]="'true'">
          <nz-input formControlName='passwordConfirm' [nzPlaceHolder]="'Confirm Password'" [nzSize]="'large'">
            <ng-template #prefix>
              <i class="anticon anticon-lock"></i>
            </ng-template>
          </nz-input>
          <div nz-form-explain *ngIf="forgetPassword.controls.passwordConfirm.dirty&&forgetPassword.controls.passwordConfirm.hasError('required')">Please input your password!</div>
          <div nz-form-explain *ngIf="forgetPassword.controls.passwordConfirm.dirty&&forgetPassword.controls.passwordConfirm.hasError('accordance')">The passwords entered twice are not the same!</div>
        </div>
        <button nz-button type='button' (click)="setNewPass()" [nzType]="'primary'" [nzSize]="'large'">提交</button>
      </div>
    </form>
  </div>
</div>